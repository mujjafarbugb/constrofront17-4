import{u as N,r as n,Q as S,j as l,a as e,F}from"./index.8d209275.js";import"./index.esm.f6a38425.js";import{B as V}from"./index.80209685.js";import{M as u,B as b}from"./Modal.451c7296.js";import{T as r}from"./Textinput.3d307643.js";import{a as p}from"./axios.74c9240f.js";import"./iconBase.3b0c2950.js";const A=()=>{N();const[m,h]=n.exports.useState(!1),[d,f]=n.exports.useState([]),[x,g]=n.exports.useState([]),[a,o]=n.exports.useState({client:"",project:"",scope:"",scopeId:"",billValue:"",workValue:"",workCompleted:"",isCompleted:!1,remark:""}),v=localStorage.getItem("user"),y=JSON.parse(v),j=localStorage.getItem("profile"),k=JSON.parse(j);n.exports.useEffect(()=>{p.get(`https://constrobackend17-4.onrender.com/api/get_service_provider_regid/${y.user._id}`).then(t=>{if(console.log(66,t),!t.data.Result)S.error(t.data.message);else{h(!0),console.log("Data Fetch",t.data.Result);const c=t.data.Result.projectList.filter(P=>P.isCompleted===!1);console.log(22,c);const i=t.data.Result;console.log("Show Data",i.projectList),f(c)}}).catch(t=>{console.log(t)}),p.get("https://constrobackend17-4.onrender.com/api/get_all_expertise").then(t=>{console.log(t.data.Result),g(t.data.Result)}).catch(t=>{console.error("Error fetching expertise data:",t)})},[m]);const C=()=>{const t={projectList:[...d,{...a}]};console.log(72,t),p.put(`https://constrobackend17-4.onrender.com/api/update_Service_Provider/${k._id}`,t).then(s=>{console.log("res",s)}).catch(s=>{console.log(s)}),h(!m)},w=t=>{const s=t.target.value,c=x.find(i=>i._id===s);console.log("Selected Scope:",c),o({...a,scope:c.expertise,scopeId:c._id})};return l("div",{className:"shadow-md p-4",children:[l("div",{className:"flex justify-between items-center",children:[e("span",{className:"my-4 text-lg font-semibold text-slate-500",children:"Ongoing Projects"}),e("div",{children:e(u,{title:"",label:"Add Projects + ",labelClass:"bg-[#00adee] hover:bg-[#6fcaeb] text-white",uncontrol:!0,footerContent:e(b,{text:"Add Project",className:"w-full bg-[#00adee] hover:bg-[#6fcaeb] text-white",onClick:()=>{C()}}),children:l("div",{className:"text-base text-slate-600 dark:text-slate-300 mt-2",children:[e(r,{label:"Client name",type:"text",placeholder:"",value:a.client,onChange:t=>o({...a,client:t.target.value})}),l("div",{class:"  mt-2",children:[e("label",{for:"formFile",class:"form-label",children:"Project name"}),e(r,{type:"text",placeholder:"",class:"my-2",value:a.project,onChange:t=>o({...a,project:t.target.value})})]}),l("div",{className:"input-group mt-2",children:[e("label",{htmlFor:"cityInput",className:"form-label",children:"Select Expertise"}),l("select",{className:"form-select text-sm",id:"exampleInputYear","aria-describedby":"emailHelp",name:"expertiseId",value:a.scope,defaultValue:a.scope?a.scope:"",onChange:w,children:[e("option",{value:"",children:"selct Experties"}),x.map(t=>e("option",{value:t._id,children:t.expertise},t._id))]})]}),l("div",{class:"  mt-3",children:[e("label",{for:"formFile",class:"form-label",children:"Bill Value"}),e(r,{type:"text",placeholder:"\u20B9",value:a.billValue,onChange:t=>o({...a,billValue:t.target.value})})]}),l("div",{class:"  mt-3",children:[e("label",{for:"formFile",class:"form-label",children:"Work Order Value"}),e(r,{type:"text",placeholder:"\u20B9",value:a.workValue,onChange:t=>o({...a,workValue:t.target.value})})]}),l("div",{class:"  mt-2",children:[e("label",{for:"formFile",class:"form-label",children:"Work Completed(%)"}),e(r,{type:"text",placeholder:"%",value:a.workCompleted,onChange:t=>o({...a,workCompleted:t.target.value})})]}),l("div",{class:"mb-2  mt-2",children:[e("label",{for:"formFile",class:"form-label",children:"Remark"}),e(r,{type:"text",placeholder:"",value:a.remark,onChange:t=>o({...a,remark:t.target.value})})]})]})})})]}),e("div",{class:"overflow-x-auto",children:l("table",{class:"table-auto w-full shadow-sm rounded-md mt-3",children:[e("thead",{class:"border border-collapse bg-[#00adee] text-white",children:l("tr",{className:" rounded-md",children:[e("th",{class:"px-4 py-2 text-center border",children:"Client"}),e("th",{class:"px-4 py-2 text-center border",children:"Projects"}),e("th",{class:"px-4 py-2 text-center border",children:"Scope"}),e("th",{class:"px-4 py-2 text-center border",children:"Bill Value"}),e("th",{class:"px-4 py-2 text-center border",children:"Work Order Value"}),e("th",{class:"px-4 py-2 text-center border",children:"Work Completed(%)"}),e("th",{class:"px-4 py-2 text-center border",children:"Remark"}),e("th",{class:"px-4 py-2 text-center border",children:"Action"})]})}),e("tbody",{children:d==null?void 0:d.map(t=>e(F,{children:l("tr",{className:"hover:bg-[#f8f8f8] shadow-sm",children:[e("td",{class:"px-4 py-2 text-center text-sm text-slate-500",children:t.client}),e("td",{class:"px-4 py-2 text-center text-sm text-slate-500",children:t.project}),e("td",{class:"px-4 py-2 text-center text-sm text-slate-500",children:t.scope}),e("td",{class:"px-4 py-2 text-center text-sm text-slate-500",children:t.billValue}),e("td",{class:"px-4 py-2 text-center text-sm text-slate-500",children:t.workValue}),l("td",{class:"px-4 py-2 text-center text-sm text-slate-500",children:[t.workCompleted,"%"]}),e("td",{class:"px-4 py-2 text-center text-sm text-slate-500",children:t.remark}),e("td",{className:"px-4 py-2 text-center flex justify-center text-sm text-slate-500",children:e("div",{className:"cursor-pointer hover:text-[#00adee]",children:e(u,{title:"",label:e(V,{className:"text-3xl"}),labelClass:"",uncontrol:!0,footerContent:e(b,{text:"Update Project",className:"w-full bg-[#00adee] hover:bg-[#6fcaeb] text-white"}),children:l("div",{className:"text-base text-slate-600 dark:text-slate-300 mt-3",children:[e("label",{for:"formFile",class:"form-label",children:"Project name"}),e(r,{type:"text",placeholder:"Project name"}),l("div",{class:"input-group mb-2 mt-2",children:[e("label",{for:"formFile",class:"form-label",children:"Select City"}),l("select",{class:"form-select text-sm","aria-label":"Default select example",children:[e("option",{value:"1",selected:!0,children:"Pune"}),e("option",{value:"2",children:"Mumbai"}),e("option",{value:"3",children:"Goa"})]})]}),e(r,{label:"Location",type:"text",placeholder:"Enter location"}),l("div",{class:"input-group mt-2",children:[e("label",{for:"formFile",class:"form-label",children:"Building Name"}),e("input",{type:"text",class:"form-control",placeholder:"","aria-label":"Recipient's username","aria-describedby":"button-addon2"})]}),l("div",{class:"mb-2  mt-2",children:[e("label",{for:"formFile",class:"form-label",children:"Remark"}),e(r,{type:"text",placeholder:""})]})]})})})})]})}))})]})})]})};export{A as default};
